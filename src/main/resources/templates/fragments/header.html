<header th:fragment="header">
  <div
    class="container hidden md:flex justify-between items-center mx-auto p-6"
  >
    <div>
      <a href="/"
        ><img th:src="@{/img/logo.svg}" alt="SmartPick logo" class="w-36"
      /></a>
    </div>
    <nav class="text-lg">
      <ul class="flex items-center gap-8">
        <li><a href="/" class="relative header-link">Home</a></li>
        <li><a href="/products" class="relative header-link">Products</a></li>
        <li>
          <a href="/contact-us" class="relative header-link">Contact us</a>
        </li>
        <ul class="flex items-center gap-8 ml-16">
          <li class="relative">
            <a href="/saved-products"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-6 h-6"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"
                />
              </svg>
              <div
                sec:authorize="isAuthenticated()"
                class="absolute -bottom-4 -right-2 w-5 h-5 grid place-items-center bg-cyan-800 rounded-full text-sm text-white"
                th:text="${productsSavedByUser?.size()}"
              ></div>
            </a>
          </li>
          <li class="relative">
            <a href="/shopping-cart"
              ><svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-6 h-6"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"
                />
              </svg>
              <div
                sec:authorize="isAuthenticated()"
                class="absolute -bottom-4 -right-2 w-5 h-5 grid place-items-center bg-cyan-800 rounded-full text-sm text-white"
                th:text="${productsInShoppingCart?.size()}"
              ></div>
            </a>
          </li>
          <li sec:authorize="isAnonymous()">
            <a href="/login">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-6 h-6"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"
                />
              </svg>
            </a>
          </li>

          <li
            sec:authorize="isAuthenticated()"
            x-data="{ openMenu: false }"
            class="relative"
          >
            <p @click="openMenu =! openMenu">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="w-6 h-6 cursor-pointer"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"
                />
              </svg>
            </p>
            <div
              x-show="openMenu"
              class="absolute right-0 p-2 z-40 bg-white rounded-lg shadow-lg w-40 mt-2"
              x-cloak
            >
              <a
                th:href="${#authorization.expression('hasRole(''ADMIN'')') ? '/admin-dashboard' : '/user-dashboard'}"
                class="block px-4 py-2 text-base hover:bg-gray-100 rounded-lg"
              >
                Dashboard
              </a>
              <a
                href="/account"
                class="block px-4 py-2 text-base hover:bg-gray-100 rounded-lg mb-8"
              >
                My account</a
              ><a
                href="/logout"
                class="block px-4 py-2 text-base hover:bg-gray-100 rounded-lg"
              >
                Logout
              </a>
            </div>
          </li>
        </ul>
      </ul>
    </nav>
  </div>
  <div
    x-data="{ isOpen: false }"
    class="md:hidden flex container mx-auto px-4 py-2 items-center justify-between relative"
    x-cloak
  >
    <div class="w-[72px] flex">
      <button
        @click="isOpen = !isOpen"
        type="button"
        class="inline-flex items-center"
        :aria-expanded="isOpen ? 'true' : 'false'"
      >
        <span class="sr-only">Navigation bar</span>
        <template x-if="!isOpen">
          <svg
            class="w-5 h-5"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 17 14"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="1.5"
              d="M1 1h15M1 7h15M1 13h15"
            />
          </svg>
        </template>
      </button>
    </div>

    <a href="/"
      ><img th:src="@{/img/logo.svg}" alt="SmartPick logo" class="w-32"
    /></a>
    <div class="flex gap-4">
      <div class="relative">
        <a href="/saved-products"
          ><svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-7 h-7"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12Z"
            />
          </svg>
          <div
            sec:authorize="isAuthenticated()"
            class="absolute -bottom-3 md:-bottom-4 -right-2 w-5 h-5 grid place-items-center bg-cyan-800 rounded-full text-sm text-white"
            th:text="${productsSavedByUser?.size()}"
          ></div>
        </a>
      </div>
      <div class="relative">
        <a href="/shopping-cart"
          ><svg
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
            stroke-width="1.5"
            stroke="currentColor"
            class="w-7 h-7"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"
            />
          </svg>
          <div
            sec:authorize="isAuthenticated()"
            class="absolute -bottom-3 md:-bottom-4 -right-2 w-5 h-5 grid place-items-center bg-cyan-800 rounded-full text-sm text-white"
            th:text="${productsInShoppingCart?.size()}"
          ></div>
        </a>
      </div>
    </div>

    <div
      x-show="isOpen"
      @click.away="isOpen = false"
      class="fixed inset-0 w-full h-full bg-opacity-50 z-50"
      x-cloak
    >
      <div class="w-full h-full bg-white p-2">
        <a href="/"
          ><img
            th:src="@{/img/logo.svg}"
            alt="SmartPick logo"
            class="w-32 mx-auto"
        /></a>
        <button
          @click="isOpen = false"
          class="absolute top-0 right-0 p-2 m-2 focus:outline-none focus:ring"
        >
          <svg
            class="w-6 h-6"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 24 24"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M6 18L18 6M6 6l12 12"
            />
          </svg>
        </button>
        <ul class="mt-6 text-xl">
          <li>
            <a
              href="/"
              class="block p-6 font-medium rounded hover:font-semibold"
              >Home</a
            >
          </li>
          <li>
            <a
              href="/products"
              class="block p-6 font-medium rounded hover:font-semibold"
              >Products</a
            >
          </li>
          <li>
            <a
              href="/contact-us"
              class="block p-6 font-medium rounded hover:font-semibold"
              >Contact us</a
            >
          </li>
          <hr class="m-6 border-black" />
          <li sec:authorize="!isAuthenticated()">
            <a
              href="/login"
              class="block p-6 font-medium rounded hover:font-semibold"
              >Login</a
            >
          </li>
          <li sec:authorize="!isAuthenticated()">
            <a
              href="/registration"
              class="block p-6 font-medium rounded hover:font-semibold"
              >Sign Up</a
            >
          </li>
          <li sec:authorize="isAuthenticated()">
            <a
              th:href="${#authorization.expression('hasRole(''ADMIN'')') ? '/admin-dashboard' : '/user-dashboard'}"
              class="block p-6 font-medium rounded hover:font-semibold"
              >Dashboard</a
            >
          </li>
          <li sec:authorize="isAuthenticated()">
            <a
              href="/account"
              class="block p-6 font-medium rounded hover:font-semibold"
              >My account</a
            >
          </li>
          <li sec:authorize="isAuthenticated()">
            <a
              href="/logout"
              class="block p-6 font-medium rounded hover:font-semibold"
              >Logout</a
            >
          </li>
        </ul>
        <div
          class="flex items-center gap-6 absolute bottom-5 right-1/2 translate-x-1/2"
        >
          <a href="https://www.facebook.com" target="_blank">
            <svg
              class="w-6 h-6"
              aria-hidden="true"
              xmlns="http://www.w3.org/2000/svg"
              fill="currentColor"
              viewBox="0 0 8 19"
            >
              <path
                fill-rule="evenodd"
                d="M6.135 3H8V0H6.135a4.147 4.147 0 0 0-4.142 4.142V6H0v3h2v9.938h3V9h2.021l.592-3H5V3.591A.6.6 0 0 1 5.592 3h.543Z"
                clip-rule="evenodd"
              />
            </svg>
            <span class="sr-only">Facebook account</span>
          </a>
          <a href="https://www.instagram.com" target="_blank">
            <svg
              class="w-6 h-6"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
            >
              <path
                fill="currentColor"
                d="M13.028 2.001a78.82 78.82 0 0 1 2.189.022l.194.007c.224.008.445.018.712.03c1.064.05 1.79.218 2.427.465c.66.254 1.216.598 1.772 1.154a4.908 4.908 0 0 1 1.153 1.771c.247.637.415 1.364.465 2.428c.012.266.022.488.03.712l.006.194a79 79 0 0 1 .023 2.188l.001.746v1.31a78.836 78.836 0 0 1-.023 2.189l-.006.194c-.008.224-.018.445-.03.712c-.05 1.064-.22 1.79-.466 2.427a4.884 4.884 0 0 1-1.153 1.772a4.915 4.915 0 0 1-1.772 1.153c-.637.247-1.363.415-2.427.465c-.267.012-.488.022-.712.03l-.194.006a79 79 0 0 1-2.189.023l-.746.001h-1.309a78.836 78.836 0 0 1-2.189-.023l-.194-.006a60.64 60.64 0 0 1-.712-.03c-1.064-.05-1.79-.22-2.428-.466a4.89 4.89 0 0 1-1.771-1.153a4.904 4.904 0 0 1-1.154-1.772c-.247-.637-.415-1.363-.465-2.427a74.367 74.367 0 0 1-.03-.712l-.005-.194A79.053 79.053 0 0 1 2 13.028v-2.056a78.82 78.82 0 0 1 .022-2.188l.007-.194c.008-.224.018-.446.03-.712c.05-1.065.218-1.79.465-2.428A4.88 4.88 0 0 1 3.68 3.68a4.897 4.897 0 0 1 1.77-1.155c.638-.247 1.363-.415 2.428-.465l.712-.03l.194-.005A79.053 79.053 0 0 1 10.972 2h2.056Zm-1.028 5A5 5 0 1 0 12 17a5 5 0 0 0 0-10Zm0 2A3 3 0 1 1 12.001 15a3 3 0 0 1 0-6Zm5.25-3.5a1.25 1.25 0 0 0 0 2.498a1.25 1.25 0 0 0 0-2.5Z"
              />
            </svg>
            <span class="sr-only">Instagram account</span>
          </a>
        </div>
      </div>
    </div>
  </div>
</header>
